From a6014ff0cac93d42fd96ba36095675a367459188 Mon Sep 17 00:00:00 2001
From: Aadhar Agarwal <aadagarwal@microsoft.com>
Date: Thu, 29 Sep 2022 15:18:38 -0700
Subject: [PATCH] removed tulip.c from build process due to CVE-2022-2962

---
 hw/net/Makefile.objs | 4 +++-
 hw/net/tulip.c       | 3 +++
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/hw/net/Makefile.objs b/hw/net/Makefile.objs
index 7907d2c1..be607833 100644
--- a/hw/net/Makefile.objs
+++ b/hw/net/Makefile.objs
@@ -13,7 +13,9 @@ common-obj-$(CONFIG_E1000E_PCI_EXPRESS) += e1000e.o e1000e_core.o e1000x_common.
 common-obj-$(CONFIG_RTL8139_PCI) += rtl8139.o
 common-obj-$(CONFIG_VMXNET3_PCI) += net_tx_pkt.o net_rx_pkt.o
 common-obj-$(CONFIG_VMXNET3_PCI) += vmxnet3.o
-common-obj-$(CONFIG_TULIP) += tulip.o
+
+# taking out of build due to CVE-2022-2962
+# common-obj-$(CONFIG_TULIP) += tulip.o
 
 common-obj-$(CONFIG_SMC91C111) += smc91c111.o
 common-obj-$(CONFIG_LAN9118) += lan9118.o
diff --git a/hw/net/tulip.c b/hw/net/tulip.c
index f85f5434..cdbd0804 100644
--- a/hw/net/tulip.c
+++ b/hw/net/tulip.c
@@ -18,6 +18,9 @@
 #include "trace.h"
 #include "net/eth.h"
 
+// Taking this file out of the build process due to CVE-2022-2962
+DEADBEEF // syntax error ensures it's not included in the build
+
 typedef struct TULIPState {
     PCIDevice dev;
     MemoryRegion io;
-- 
2.17.1

